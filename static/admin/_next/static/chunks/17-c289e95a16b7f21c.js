"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17],{91017:function(e,n,t){t.d(n,{Z:function(){return C}});var a=t(28520),l=t.n(a),r=t(85893),s=t(67294),i=t(17256),c=t(71577),o=t(69677),u=t(11225),d=t(46697),f=t(48689),p=t(13377),m=t(58827),h=t(25964);function v(e){var n=e.iconList,t=e.selectedOption,a=e.onSelected,l=""===t?null:t;return(0,r.jsxs)("div",{className:"social-dropdown-container",children:[(0,r.jsx)("p",{className:"description",children:"\u0e2b\u0e32\u0e01\u0e04\u0e38\u0e13\u0e01\u0e33\u0e25\u0e31\u0e07\u0e21\u0e2d\u0e07\u0e2b\u0e32\u0e0a\u0e37\u0e48\u0e2d\u0e41\u0e1e\u0e25\u0e15\u0e1f\u0e2d\u0e23\u0e4c\u0e21\u0e17\u0e35\u0e48\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e2d\u0e22\u0e39\u0e48\u0e43\u0e19\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49 \u0e42\u0e1b\u0e23\u0e14\u0e40\u0e25\u0e37\u0e2d\u0e01 \u0e2d\u0e37\u0e48\u0e19\u0e46 \u0e41\u0e25\u0e49\u0e27\u0e1e\u0e34\u0e21\u0e1e\u0e4c \u0e0a\u0e37\u0e48\u0e2d\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e40\u0e2d\u0e07 \u0e42\u0e25\u0e42\u0e01\u0e49\u0e08\u0e30\u0e44\u0e21\u0e48\u0e21\u0e35\u0e43\u0e2b\u0e49"}),(0,r.jsxs)("div",{className:"formfield-container",children:[(0,r.jsx)("div",{className:"label-side",children:(0,r.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,r.jsx)("div",{className:"input-side",children:(0,r.jsxs)(p.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:l,value:l,onSelect:function(e){a&&a(e)},children:[n.map((function(e){var n=e.platform,t=e.icon,a=e.key,l="".concat(m.WB).concat(t.slice(1));return(0,r.jsxs)(p.Z.Option,{className:"social-option",value:a,children:[(0,r.jsx)("span",{className:"option-icon",children:(0,r.jsx)("img",{src:l,alt:"",className:"option-icon"})}),(0,r.jsx)("span",{className:"option-label",children:n})]},"platform-".concat(a))})),(0,r.jsx)(p.Z.Option,{className:"social-option",value:h.z_,children:"Other..."},"platform-".concat(h.z_))]})})]})]})}var j=t(35159),x=t(19411),b=t(19363),N=t(83200),y=t(78464);function g(e,n,t,a,l,r,s){try{var i=e[r](s),c=i.value}catch(o){return void t(o)}i.done?n(c):Promise.resolve(c).then(a,l)}function k(e){return function(){var n=this,t=arguments;return new Promise((function(a,l){var r=e.apply(n,t);function s(e){g(r,a,l,s,i,"next",e)}function i(e){g(r,a,l,s,i,"throw",e)}s(void 0)}))}}function w(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){w(e,n,t[n])}))}return e}function O(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Z=i.Z.Title;function C(){var e=(0,s.useState)([]),n=e[0],t=e[1],a=(0,s.useState)([]),i=a[0],p=a[1],g=(0,s.useState)(!1),C=g[0],E=g[1],P=(0,s.useState)(!1),z=P[0],_=P[1],I=(0,s.useState)(!1),T=I[0],L=I[1],A=(0,s.useState)(-1),H=A[0],B=A[1],D=(0,s.useState)(h.wC),U=D[0],V=D[1],W=(0,s.useState)(null),F=W[0],K=W[1],Q=(0,s.useContext)(j.aC)||{},R=Q.serverConfig,$=Q.setFieldInConfigState,q=R.instanceDetails,G=q.socialHandles,J=null,M=k(l().mark((function e(){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.rQ)(m.$i,{auth:!1});case 3:n=e.sent,a=Object.keys(n).map((function(e){return S({key:e},n[e])})),t(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),X=function(e){return n.find((function(n){return n.key===e}))||!1},Y=""!==U.platform&&!n.find((function(e){return e.key===U.platform}));(0,s.useEffect)((function(){M()}),[]),(0,s.useEffect)((function(){q.socialHandles&&p(G)}),[q]);var ee=function(){K(null),J=null,clearTimeout(J)},ne=function(){E(!1),B(-1),_(!1),L(!1),V(S({},h.wC))},te=function(){ne()},ae=function(e,n){V(S({},U,w({},e,n)))},le=k(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Si)({apiPath:h.c9,data:{value:n},onSuccess:function(){$({fieldName:"socialHandles",value:n,path:"instanceDetails"}),L(!1),te(),K((0,N.kg)(N.zv)),J=setTimeout(ee,h.sI)},onError:function(e){K((0,N.kg)(N.Un,"There was an error: ".concat(e))),L(!1),J=setTimeout(ee,h.sI)}});case 2:case"end":return e.stop()}}),e)}))),re=[{title:"Social Link",dataIndex:"",key:"combo",render:function(e,n){var t=n.platform,a=n.url,l=X(t);if(!l)return(0,r.jsx)("div",{className:"social-handle-cell",children:(0,r.jsxs)("p",{className:"option-label",children:[(0,r.jsx)("strong",{children:t}),(0,r.jsx)("span",{className:"handle-url",title:a,children:a})]})});var s=l.icon,i=l.platform,c="".concat(m.WB).concat(s.slice(1));return(0,r.jsxs)("div",{className:"social-handle-cell",children:[(0,r.jsx)("span",{className:"option-icon",children:(0,r.jsx)("img",{src:c,alt:"",className:"option-icon"})}),(0,r.jsxs)("p",{className:"option-label",children:[(0,r.jsx)("strong",{children:i}),(0,r.jsx)("span",{className:"handle-url",title:a,children:a})]})]})}},{title:"",dataIndex:"",key:"edit",render:function(e,n,t){return(0,r.jsxs)("div",{className:"actions",children:[(0,r.jsx)(c.Z,{size:"small",onClick:function(){var e=i[t];B(t),V(S({},e)),E(!0),X(e.platform)||_(!0)},children:"Edit"}),(0,r.jsx)(c.Z,{className:"delete-button",icon:(0,r.jsx)(f.Z,{}),size:"small",onClick:function(){return function(e){var n=O(i);n.splice(e,1),le(n)}(t)}})]})}}],se={disabled:!(0,x.Z)(U.url)},ie=(0,r.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,r.jsx)("div",{className:"label-side"}),(0,r.jsx)("div",{className:"input-side",children:(0,r.jsx)(o.Z,{placeholder:"Other platform name",defaultValue:U.platform,onChange:function(e){var n=e.target.value;ae("platform",n)}})})]});return(0,r.jsxs)("div",{className:"social-links-edit-container",children:[(0,r.jsx)(Z,{level:3,className:"section-title",children:"Social Handles"}),(0,r.jsx)("p",{className:"description",children:"\u0e0a\u0e48\u0e2d\u0e07\u0e17\u0e32\u0e07 \u0e42\u0e0b\u0e40\u0e0a\u0e35\u0e22\u0e25 \u0e41\u0e2a\u0e14\u0e07\u0e1c\u0e25\u0e17\u0e35\u0e48 \u0e40\u0e27\u0e47\u0e1a\u0e23\u0e30\u0e2b\u0e27\u0e48\u0e32\u0e07 LIVE"}),(0,r.jsx)(y.Z,{status:F}),(0,r.jsx)(u.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:function(e){return"".concat(e.platform,"-").concat(e.url)},columns:re,dataSource:i}),(0,r.jsx)(d.Z,{title:"Edit Social Handle",visible:C,onOk:function(){L(!0);var e=i.length?O(i):[];-1===H?e.push(U):e.splice(H,1,U),le(e)},onCancel:te,confirmLoading:T,okButtonProps:se,children:(0,r.jsxs)("div",{className:"social-handle-modal-content",children:[(0,r.jsx)(v,{iconList:n,selectedOption:Y?h.z_:U.platform,onSelected:function(e){e===h.z_?(_(!0),ae("platform","")):(_(!1),ae("platform",e))}}),z&&ie,(0,r.jsx)("br",{}),(0,r.jsx)(b.ZP,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[U.platform]||"Url to page",value:U.url,onChange:function(e){var n=e.value;ae("url",n)},useTrim:!0,type:"url",pattern:x.a}),(0,r.jsx)(y.Z,{status:F})]})}),(0,r.jsx)("br",{}),(0,r.jsx)(c.Z,{type:"primary",onClick:function(){ne(),E(!0)},children:"\u0e40\u0e1e\u0e34\u0e48\u0e21 social link"})]})}}}]);